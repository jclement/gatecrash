FROM alpine:3.21
RUN apk add --no-cache ca-certificates tzdata && \
    adduser -D -u 1000 gatecrash && \
    mkdir -p /etc/gatecrash /data && \
    chown gatecrash:gatecrash /etc/gatecrash /data
WORKDIR /app
COPY gatecrash .
EXPOSE 8080 443 80
VOLUME ["/etc/gatecrash", "/data"]
USER gatecrash
CMD ["./gatecrash", "server", "--config", "/etc/gatecrash/gatecrash.toml"]
